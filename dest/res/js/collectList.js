function getNewData(e){var e=e||"new";"new"==e?pageNo=1:pageNo++,"new"==e&&showLoading();var t=serverAddress+"/utvgoClient/interfaces/userCollect_list.action";ajaxMore=$.ajax({type:"GET",url:t,data:{pageSize:pageSize,pageNo:pageNo,userId:userId},dataType:"json",success:function(t){hideLoading(),renderListData(t.result||[],e)},error:function(e,t){ajaxMore=null}})}function renderListData(e,t){for(var a="",e=e||[],o=0,n=e.length;o<n;o++)a+='<div class="commonList-item"> <a data-remark="'+e[o].remark+'" data-href="./play_sn.html?playName='+encodeURIComponent(e[o].name)+"&playUrl="+encodeURIComponent(e[o].playUrl)+"&playImg="+encodeURIComponent(e[o].img)+"&contentId="+encodeURIComponent(e[o].contentId)+"&col="+(e[o].mediaNumber>1?3:2)+"&type="+encodeURIComponent("qd")+"&mediaNumber="+encodeURIComponent(e[o].mediaNumber)+'" class="commonList-item-link clearfix"> <div class="commonList-item-img"> <img src="'+e[o].img+'" /> </div> <div class="commonList-item-text-wrapper"> <p class="commonList-item-text">'+e[o].name+'</p> <span class="commonList-item-type-text">'+e[o].createTime+"&nbsp;&nbsp;&nbsp;"+e[o].type+"</span> </div> </a> </div>";t&&"new"!=t?($("#listContentBox").append(a),playList=playList.concat(e)):($("#listContentBox").html(a),playList=e);try{localStorage.setItem("playList",JSON.stringify(playList))}catch(i){}$(".nomore").length>0?$(".nomore").hide():$("#listContent").append('<div class="nomore">正在加载...</div>'),e.length<pageSize?($(".nomore").show().html("没有更多了!"),ajaxMore=!0):ajaxMore=null}$(".list-page-main").on("scroll",function(e){var t=$(this),a=t.scrollTop(),o=t.height();if(a+o-46+5>=$("#listContent").height()){if(ajaxMore)return;$(".nomore").length>0?$(".nomore").show().html("正在加载..."):$("#listContent").append('<div class="nomore">正在加载...</div>'),getNewData("more")}});var ajaxMore=null,pageNo,pageSize;pageNo=1,pageSize=10,getNewData("new");var playList=[];$("#listContentBox").on("tap",".commonList-item-link",function(e){var t=$(this).attr("data-remark");try{localStorage.setItem("videoRemark",t)}catch(a){}window.location.href=$(this).attr("data-href")});